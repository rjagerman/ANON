\documentclass[journal]{IEEEtran}

% Some very useful LaTeX packages include:
% (uncomment the ones you want to load, see original template for descriptions)
%\usepackage{ifpdf}
%\usepackage{cite}
%\usepackage[cmex10]{amsmath}
%\usepackage{algorithmic}
%\usepackage{array}
%\usepackage{fixltx2e}
%\usepackage{stfloats}
%\usepackage{dblfloatfix}
%\usepackage{url}

% *** Do not adjust lengths that control margins, column widths, etc. ***
% *** Do not use packages that alter fonts (such as pslatex).         ***
% There should be no need to do such things with IEEEtran.cls V1.6 and later.
% (Unless specifically asked to do so by the journal or conference you plan
% to submit to, of course. )

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

% *** UTF8 ***
\usepackage[utf8]{inputenc}


\begin{document}

	% Title of the paper
	\title{ANON paper}
	% Authors
	\author{Rolf Jagerman, Wendo Sab\'ee, Laurens Versluis, Martijn de Vos}

	% The paper headers
	%\markboth{Journal of \LaTeX\ Class Files,~Vol.~11, No.~4, December~2012}%
	%{Shell \MakeLowercase{\textit{et al.}}: Bare Demo of IEEEtran.cls for Journals}
	% The only time the second header will appear is for the odd numbered pages
	% after the title page when using the twoside option.

	% make the title area
	\maketitle

	% As a general rule, do not put math, special symbols or citations
	% in the abstract or keywords.
	\begin{abstract}
		The abstract goes here. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc et elit nec metus ultrices faucibus. Mauris volutpat libero eu arcu sodales, ac bibendum neque pulvinar. Sed et ipsum nunc. Quisque ac sem ut nunc tincidunt commodo. Cras at odio nibh. Pellentesque sodales ut tortor sed dictum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. 
	\end{abstract}


	\section{Introduction}
		% The very first letter is a 2 line initial drop letter followed
		% by the rest of the first word in caps.
		% 
		% form to use if the first word consists of a single letter:
		% \IEEEPARstart{A}{demo} file is ....
		% 
		% form to use if you need the single drop letter followed by
		% normal text (unknown if ever used by IEEE):
		% \IEEEPARstart{A}{}demo file is ....
		% 
		% Some journals put the first two words in caps:
		% \IEEEPARstart{T}{his demo} file is ....
		% 
		% Here we have the typical use of a "T" for an initial drop letter
		% and "HIS" in caps to complete the first word.
		% You must have at least 2 lines in the paragraph with the drop letter
		% (should never be an issue)
		\IEEEPARstart{L}{orem} ipsum dolor sit amet, consectetur adipiscing elit. Nunc et elit nec metus ultrices faucibus. Mauris volutpat libero eu arcu sodales, ac bibendum neque pulvinar. Sed et ipsum nunc. Quisque ac sem ut nunc tincidunt commodo. Cras at odio nibh. Pellentesque sodales ut tortor sed dictum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
		
		
	\section{Tor design}
		\label{sec:tor}
		The implementation of The Onion Router was first described by the U.S. Navy Research Laboratory, as means to protect government communications from digital, as well as physical attacks, by hiding the location of the communicating party or parties \cite{bib:goldschlag}.
		
		In 2002, it was decided to ditch the old code base and reimplement the project as Tor, the Second Generation Onion Router, introducing perfect forward secrecy, directory servers, hidden services and more \cite{bib:dingledine}.
		
		\subsection{Onion routing}
			As described in the original design paper of The Onion Router, network traffic is forwarded through a circuit of nodes, where each node only knows the previous and next node in the circuit. With a sufficiently long circuit of (independent) nodes, this means that two communicating parties can remain oblivious of each others physical location.
			
			Say we have a circuit of nodes $C = \{c_0, \dots, c_n\}$, where $c_0$ is our trusted client and $c_n$ is the exit node. Each node has its own public key $p$ and a corresponding private key $d$. For each node in $C$, $c_0$ generates a distinct secret $s$.
			
			The payload of each packet flowing from $c_0$ to $c_n$ through circuit $C$ is first encrypted with $s_e$, the secret generated for node $c_e$. This is repeated for $s_{e-1}$, $s_{e-2}$, etc, until lastly it is encrypted with $s_1$. With each layer of encryption, a header is added with the address of next node in the circuit, plus the generated secret $s$ for the current node, encrypted its public key.
			
			After node $c_1$ receives this packet from our trusted node $c_0$, it decrypts the secret $s_1$ with its private key $d_1$, and uses it to decrypt the rest of the packet. The result is a header with the address of node $c_2$ and the payload encrypted with secrets $s_2$ to $s_e$, which is forwarded to node $c_2$.
			
			As node $c_x$ receives data from the previous node $c_{x-1}$, it peels off another layer of encryption, much as how you can peel an onion layer for layer, and forwards it to $c_{x+1}$. When exit node $c_n$ decrypts the last layer and forwards the unencrypted payload outside the network to the original destination that $c_0$ specified, acting as a traditional proxy. 
			
			When $c_n$ receives a response, this whole process is applied in reverse order, encrypting the payload with its secret along the way, instead of decrypting. When $c_0$ receives the packet, it peels off all the encryption layers to retrieve the unencrypted payload. 
			
			With the second generation onion routing used in Tor, a modified algorithm is used to derive the encryption keys, called \emph{telescoping path-building}, which also provides perfect forward secrecy. This algorithm is described in section \ref{ss:tor_circuit}.
			
			
		\subsection{Directory servers}
		
		\subsection{Relay and exit nodes}
		
		\subsection{Circuit creation}
			\label{ss:tor_circuit}
		
		\subsection{Disadvantages}
		
		
	\section{Conclusion}
		The conclusion goes here.
		
		
	\appendices
%		\section{Proof of the First Zonklar Equation}
%			Appendix one text goes here.
			
			% you can choose not to have a title for an appendix
			% if you want by leaving the argument blank
%		\section{}
%			Appendix two text goes here.
			
			
		% use section* for acknowledgement
%		\section*{Acknowledgment}
%			The authors would like to thank...
			
			
		% Can use something like this to put references on a page
		% by themselves when using endfloat and the captionsoff option.
%		\ifCLASSOPTIONcaptionsoff
%		  \newpage
%		\fi
			
		% trigger a \newpage just before the given reference
		% number - used to balance the columns on the last page
		% adjust value as needed - may need to be readjusted if
		% the document is modified later
		%\IEEEtriggeratref{8}
		% The "triggered" command can be changed if desired:
		%\IEEEtriggercmd{\enlargethispage{-5in}}
		
		% references section
		
		% can use a bibliography generated by BibTeX as a .bbl file
		% BibTeX documentation can be easily obtained at:
		% http://www.ctan.org/tex-archive/biblio/bibtex/contrib/doc/
		% The IEEEtran BibTeX style support page is at:
		% http://www.michaelshell.org/tex/ieeetran/bibtex/
		%\bibliographystyle{IEEEtran}
		% argument is your BibTeX string definitions and bibliography database(s)
		%\bibliography{IEEEabrv,../bib/paper}
		%
		% <OR> manually copy in the resultant .bbl file
		% set second argument of \begin to the number of references
		% (used to reserve space for the reference number labels box)
	\begin{thebibliography}{1}

		\bibitem{bib:goldschlag}
			David M. Goldschlag, Michael G. Reed, and Paul F. Syverson. "Hiding Routing Information", Workshop on Information Hiding, Cambridge, UK, May, 1996.
		
		\bibitem{bib:dingledine}
			Roger Dingledine, Nick Mathewson, Paul Syverson. "Tor: The Second-Generation Onion Router", 2002.
		
	\end{thebibliography}

\end{document}


